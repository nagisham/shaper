(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();var L;(e=>{function t(r){return r()}e.call=t;function n(r){return!r}e.togle=n})(L||(L={}));var U;(e=>{function t(i,s){return Object.assign(i,s)}e.assign=t;function n(i){return Object.getPrototypeOf(i).constructor}e.getConstructor=n;function r(i,s){return Object.setPrototypeOf(i,s.prototype)}e.setConstructor=r,e.keys=i=>Object.keys(i);function o(i,s,d){if(typeof i=="object"&&i!==null&&i!==void 0&&s in i){if(typeof d=="string")return typeof i[s]===d;if(typeof d=="function")return i[s]instanceof d}return!1}e.has=o})(U||(U={}));var P;(e=>{function t(o,i=0,s){return function*(){for(s??(s=o.length);i<=s;)yield o[i],i++}}e.iterator=t;function n(o,i,s){return{[Symbol.iterator]:t(o,i,s)}}e.iterable=n;function r(o,i){return s=>n(s,o,i)}e.slice=r})(P||(P={}));function E(e,t){function n(){return U.setConstructor(t?Object.assign(t(...P.iterable(arguments,0,t.length)),e(...P.iterable(arguments,t.length))):e(...arguments),n)}return Object.defineProperties(n,{name:{value:e.name,configurable:!1,enumerable:!1,writable:!1},length:{value:e.length,configurable:!1,enumerable:!1,writable:!1}}),t&&(Object.setPrototypeOf(n,t.prototype),Object.setPrototypeOf(n.prototype,t.prototype)),n}function re(...e){return()=>{e.forEach(t=>t==null?void 0:t())}}function v(e){return e==null}function I(e){return!v(e)}function W(e){return typeof e=="number"}function b(e){return typeof e=="string"}function oe(e){return b(e)&&e===""}function M(e){return!oe(e)}function ie(e){return typeof e=="object"}function O(e,t){return t?e instanceof Array&&e.length===t:e instanceof Array}function j(e){return typeof e=="function"}function S(e,...t){return j(e)?e(...t):e}var _="listening:";function k(e){let t={},n=i=>t[i]??(t[i]={listeners:[]});function r(i,s){let d=n(i);d.listeners.forEach(g=>{g(s,d.previous)}),d.previous=s}function o(i){let{type:s,select:d,each:g,once:m}=i,u=i.equal??(e==null?void 0:e.equal),a=n(s);function c(){let{listeners:p}=a,y=p.indexOf(l);if(y===-1){console.warn("event engine: registered listener not found");return}p.splice(y,1)}function l(p,y){try{if(d&&(p&&(p=d(p)),y&&(y=d(y))),y&&(u==null?void 0:u(p,y)))return;g?g(p):m?(m(p),c()):console.error("event engine: no listener was provided")}catch(x){console.error(x)}}return a.listeners.push(l),s.startsWith(_)||r(_+s,l),c}return{fire:r,listen:o}}function A(e){let t={current:e,previous:e};function n(o){return o?t.previous:t.current}function r(o){t.previous=t.current,t.current=o}return{get:n,set:r}}var $=E(e=>{let{get:t,set:n}=A(e),{fire:r,listen:o}=k();o({type:"listening:change",each:s=>{I(t())&&s(t())}}),o({type:"cleanup",each:()=>n(void 0)});function i(s){if(v(s))return t();let d=t(),g=S(s,d);Object.is(d,g)||(n(g),r("change",g))}return Object.assign(i,{fire:r,listen:o})});function ce(e){return({set:t,listen:n})=>{let r=localStorage.getItem(e);I(r)&&t(JSON.parse(r)),n({type:"change",each:o=>{localStorage.setItem(e,JSON.stringify(o))}})}}var se=E((e,t)=>{let{get:n,set:r}=A(e),{fire:o,listen:i}=k();i({type:"listening:change",each:g=>{I(n())&&g(n())}}),i({type:"cleanup",each:()=>r(void 0)});function s(){return Object.assign({},n())}function d(g,m){var u;if(v(g)&&v(m))return s();if(ie(g)||j(g)){let a=n(),c=Object.assign({},a,S(g,a));r(c),o("change",c)}if(b(g)&&v(m))return(u=n())==null?void 0:u[g];if(b(g)&&I(m)){let a=n(),c=Object.assign({},a,{[g]:S(m,a==null?void 0:a[g])});r(c),o("change",c)}}return t==null||t.forEach(g=>{g({get:n,set:r,fire:o,listen:i})}),Object.assign(d,{fire:o,listen:i})}),le=E(e=>{let{get:t,set:n}=A(e??[]),{fire:r,listen:o}=k();o({type:"listening:change",each:c=>{t().length&&c(i())}}),o({type:"cleanup",each:()=>n([])});function i(c){return t(c).slice()}function s(c,l){if(v(c)&&v(l))return i();if(O(c)||j(c)){let p=S(c,i());n(p),r("change",p);return}if(I(c)){let p=b(c)?parseInt(c):c;if(v(l))return t()[p];let y=t()[p];g(p,S(l,y))}}function d(c){return t().findIndex(c)}function g(c,l){let p=i(),y,x;v(l)?(y=p.length,x=c):(y=c,x=l),p.splice(y,0,x),n(p),r("insert",{index:y,element:x})}function m(c){let l=i(),p=l.splice(c,1)[0];return n(l),r("remove",{index:c,element:p}),p}function u(c){let l=t();if(v(c))return l.length;if(c===0){r("cleanup");return}let p=l.length;for(;p>c;)p--,m(p)}function a(c){t().forEach(c)}return Object.assign(s,{find:d,insert:g,remove:m,len:u,each:a,fire:r,listen:o})}),B=e=>{let{listener:t,dependency:n}=e,r=new Array,o,i={type:"change",each:()=>{}};return n.forEach(s=>{i.each=()=>{j(o)&&(o(),o=void 0);let d=n.map(L.call);d.every(I)&&(o=t(...d))},r.push(s.listen(i))}),()=>r.forEach(L.call)},H=e=>{let{listener:t,dependency:n}=e,r=$();return B({listener:(...o)=>{r(t(...o))},dependency:n}),r};function ue(e,t){let n={},r=new Proxy(e(),{get:(i,s)=>(n.key=s,Reflect.get(i,s))}),o=$(t(r));return o.listen({type:"cleanup",once:re(e.listen({type:"change",select:t,each:i=>{o(i)}}),o.listen({type:"change",each:i=>{e(n.key,i)}}))}),o}function C(e){return e instanceof $}var ae=({each:e,children:t},{slot:n})=>{if(O(e))return h("slot",{"data-for":e.length},e==null?void 0:e.map(t));let r=H({listener:o=>{let i=o.map(t);return i.some(s=>s.key===void 0)?(n.unmount(),n.mount(i)):(i.forEach(function s(d,g){let m=n.find(u=>u.key===d.key);if(m===-1)n.insert(g,d);else if(m!==g){let u=n(g),a=i.findIndex(c=>c.key===u.key);if(a===-1)return n.remove(g),s(d,g);n.insert(a,n.remove(m))}}),n.len(o.length)),o.length},dependency:[e]});return h("slot",{"bind:data-for":r},n)},q=(e,{slot:t,use:n})=>{let{when:r,"not:when":o,children:i}=e,s;if(r)s=r;else if(o)s=H({listener:d=>!d,dependency:[o]});else throw new Error('Show component must have "when" or "not:when" props');return n(()=>B({listener:d=>{d?t.mount(i):t.unmount(i)},dependency:[s]})),h("slot",{"bind:data-show":s},t)};function R(e,t){let{key:n,ref:r,...o}=e??{};return t&&Object.assign(o,{children:O(t,1)?t[0]:t}),{key:n,ref:r,props:o}}var K=E(e=>{let t=le(e),n=Object.assign(t,{render(){let r=document.createDocumentFragment();return t.each(o=>r.appendChild(o.render())),r},mount(r){return r&&(O(r)?r.forEach((o,i)=>{t.insert(i,o),o.fire("mount")}):(t.insert(r),r.fire("mount"))),n},unmount(r){return O(r)?r.forEach(o=>{o.fire("unmount")}):r.fire("unmount"),t.len(0),n}});return n}),V=E((e,t,n)=>{let{key:r,ref:o,props:i}=R(t,n),{fire:s,listen:d}=k(),g={memo:{index:0,array:new Array}};function m(a){d({type:"mount",once:()=>{let c=a();c&&d({type:"unmount",once:c})}})}function u(a){let{memo:c}=g,l=c.array[c.index];return l||(c.array[c.index]=l=a()),c.index+=1,l}return d({type:"mount",each:()=>{n.forEach(a=>a.fire("mount"))}}),d({type:"unmount",each:()=>{g.memo.index=0,n.forEach(a=>a.fire("unmount"))}}),{name:e.name,key:r,render(){o==null||o(this);let a={slot:K(),use:m,memo:u};return e(i,a).render()},fire:s,listen:d}}),F="on:",J="bind:",X=E((e,t,n)=>{let{key:r,ref:o,props:i}=R(t),{fire:s,listen:d}=k();function g(u,a){a.forEach(c=>{if(G(c)){let l=c.render();u.appendChild(l)}if(Q(c)){let l=c.render();u.appendChild(l)}if(Z(c)){let l=c.render();u.appendChild(l)}if(D(c)){let l=c.render();u.appendChild(l),c.listen({type:"insert",each:({index:p,element:y})=>{let x=y.render();u.childNodes.length===0&&p===0&&u.appendChild(x);let ne=u.childNodes[p]??null;u.insertBefore(x,ne)}}),c.listen({type:"remove",each:({index:p})=>{let y=u.childNodes[p];y&&u.removeChild(y)}}),c.listen({type:"cleanup",each:()=>{u.replaceChildren()}})}c.fire("mount")})}function m(u){Object.entries(i).forEach(([a,c])=>{if(a==="class"&&b(c)){c.split(" ").forEach(l=>{l=l.trim(),M(l)&&u.classList.add(l)});return}if(a!=="children"&&a in u&&(u[a]=c),b(a)&&b(c)){u.setAttribute(a,c);return}if(a.startsWith(F)&&j(c)){a=a.substring(F.length),u.addEventListener(a,c);return}if(a.startsWith(J)){if(a=a.substring(J.length),a==="class"){if(v(c))return;if(C(c)){c.listen({type:"change",each:l=>{u.className=l}});return}if(O(c,2)&&C(c[0])&&b(c[1])){let[l,p]=c;l.listen({type:"change",each:y=>{u.classList.toggle(p,y)}});return}if(O(c)){c.forEach(l=>{if(b(l)){l.split(" ").forEach(p=>{p=p.trim(),M(p)&&u.classList.add(p)});return}if(O(l,2)&&C(l[0])&&b(l[1])){let[p,y]=l;p.listen({type:"change",each:x=>u.classList.toggle(y,x)});return}console.warn("unknown bind class array signature. value:",JSON.stringify(l))});return}return}if(C(c)){a in u&&c.listen({type:"change",each:l=>u[a]=l}),c.listen({type:"change",each:l=>u.setAttribute(a,`${l}`)});return}}console.warn(`Unhandled attribute. key: ${a}; value: ${c};`)})}return d({type:"mount",each:()=>{n.forEach(u=>u.fire("mount"))}}),d({type:"unmount",each:()=>{n.forEach(u=>u.fire("unmount"))}}),{name:e,key:r,render(){let u=document.createElement(e);return m(u),o==null||o(this),g(u,n),u},fire:s,listen:d}}),Y=E(e=>{let{fire:t,listen:n}=k();return Object.assign(e,{render(){let r=e();return de(r)?r.render():r},fire:t,listen:n})}),z=E(e=>{let{fire:t,listen:n}=k();return{name:"Text",render(){let r=document.createTextNode("");return b(e)||W(e)?(r.textContent=`${e}`,r):(C(e)&&e.listen({type:"change",each:o=>{v(o)||(r.textContent=`${o}`)}}),r)},fire:t,listen:n}});function G(e){return e instanceof X}function Q(e){return e instanceof V}function fe(e){return e instanceof Y}function Z(e){return e instanceof z}function D(e){return e instanceof K}function de(e){return G(e)||Q(e)||fe(e)||Z(e)||D(e)}function he(e){return e.flat().reduce((t,n)=>n==null||n===!0||n===!1?t:b(n)||W(n)||C(n)?(t.push(z(n)),t):D(n)?(t.push(n),t):j(n)?(t.push(Y(n)),t):(t.push(n),t),new Array)}function pe(e,t,...n){let r=he(n);return j(e)?V(e,t,r):X(e,t,r)}var ge=({children:e},{slot:t})=>t.mount(e);window.h=pe;window.f=ge;function ye(e){if(b(e.container)&&(e.container=document.querySelector(e.container)),!e.container)throw new Error("container not found");e.container.appendChild(e.component.render())}const me=()=>h("footer",{class:"flex items-center justify-center [grid-area:footer]"}),be=()=>h("header",{class:"flex items-center justify-center [grid-area:header]"}),ve=({children:e})=>h("main",{class:"flex h-full w-full flex-col items-center [grid-area:main]"},e),w=se({todos:[]},[ce("todo_slice")]),xe=()=>Math.floor(Math.random()*1e9),T={slice:w,action:{add(e){if(e.text){const t=w("todos");w("todos",[...t,{...e,id:xe()}])}console.log(w())},remove(e){const t=w("todos").slice(),n=t.findIndex(r=>Object.is(r,e));n!==-1&&(t.splice(n,1),w("todos",t))},update(e){const t=w("todos").slice(),n=t.findIndex(r=>r.id===e.id);t.splice(n,1,e),w("todos",t)}}},we=e=>e.todos,ee=e=>{const{class:t,children:n}=e;return h("div",{class:"flex gap-2 border border-gray-300 p-4 "+t},n)},te=e=>{const{class:t,value:n}=e;return h("input",{class:t,"bind:value":n,"on:change":r=>n(r.target.value)})},N=e=>{const{class:t,children:n,...r}=e;return h("button",{class:"border border-gray-300 px-2 py-1 "+t,...r},n)},Oe=()=>{const e=$(""),{action:t}=T,n=()=>{t.add({text:e()}),e("")};return h(ee,{class:"flex-col shadow-lg"},h("label",null,"New Todo:"),h("div",{class:"flex w-full flex-row gap-2"},h(te,{class:"w-full rounded-sm border border-gray-300 px-2 py-1 focus:outline-none",value:e}),h(N,{"on:click":n},"Add")))},Ee=({todo:e,onsave:t})=>{const n=$(e.text);return h(f,null,h("div",{class:"flex items-center justify-center"},"Edit:"),h(te,{class:"w-full rounded-sm border border-gray-300 px-2 py-1 focus:outline-none",value:n}),h(N,{"on:click":()=>t(n())},"Save"))},je=({todo:e,onedit:t})=>{const{action:n}=T,r=$(!1),o=()=>r(L.togle);return h(f,null,h("div",{class:"flex items-center justify-center"},h("input",{class:"h-4 w-4 cursor-pointer rounded border-gray-300 bg-gray-100",type:"checkbox","bind:checked":r,"on:change":o})),h("div",{"bind:class":["flex w-full cursor-pointer items-center",[r,"line-through"]],"on:click":o},e.text),h(N,{"on:click":t},"Edt"),h(N,{"on:click":()=>n.remove(e)},"Del"))},ke=({todo:e})=>{const{action:t}=T,n=$(!1),r=()=>n(!0),o=i=>{n(!1),t.update({...e,text:i})};return h(ee,null,h(q,{"not:when":n},h(je,{todo:e,onedit:r})),h(q,{when:n},h(Ee,{todo:e,onsave:o})))},$e=()=>{const{slice:e}=T,t=ue(e,we);return h("div",{class:"w-full py-4"},h(ae,{each:t},n=>h(ke,{key:n,todo:n})))},Ce=()=>h("div",{class:"h-full w-1/3 select-none"},h(Oe,null),h($e,null)),Ie=()=>h(f,null,h(be,null),h(ve,null,h(Ce,null)),h(me,null));ye({container:"#app",component:h(Ie,null)});
